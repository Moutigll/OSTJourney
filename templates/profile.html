<div class="header">
	<h1>Profil Utilisateur</h1>
</div>
<div class="profile-info">
	<p><span>Pseudo :</span> {{ username }}</p>
	<p><span>Email :</span> {{ email }}</p>
	<p><span>Date de création :</span> {{ created_at }}</p>
	<p><span>User id :</span> {{ user_id }}</p>
</div>

<div class="total-listened">
	<p><span>Number of tracks listened :</span> {{ total_listened }}</p>
</div>
<div class="total-duration">
	<p><span>Total listen time :</span> {{ total_duration }} </p>
</div>
<center><h3>Activity</h3></center>
<div class="activity-container">
	<h1>User Activity Heatmap</h1>

	<!-- Year Selector -->
	<div class="year-selector">
		<label for="year">Select Year:</label>
		<select id="year" name="year">
		</select>
	</div>

	<!-- Activity Heatmap Grid -->
	<table id="heatmap"></table>

	<div class="activity-label">
		<p id="activity-label">Displaying Total Duration</p>
	</div>
</div>

<center><h3>Number of tracks listened per hour</h3></center>
<canvas id="hourlyChart" style="width: 90%; height: 50vh;"></canvas>

<!-- Liste des musiques écoutées -->
<div class="listening-history">
	<center><h3>Last music listened :</h3></center>
	<table>
		<thead>
			<tr>
				<th>Song ID</th>
				<th>Title</th>
				<th>Artist</th>
				<th>Duration</th>
			</tr>
		</thead>
		<tbody id="songs-tbody">
			{% for song in songs_list %}
			<tr>
				<td><a href="/?song={{ song.song_id }}" target="_blank">{{ song.song_id }}</a></td>
				<td><a href="/?song={{ song.song_id }}" target="_blank">{{ song.title }}</a></td>
				<td>{{ song.artist }}</td>
				<td>{{ song.duration }}</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
	<button id="load-more" data-offset="25">Load More</button>
	<div style="height: 50vh;"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/profile.js') }}"></script>
